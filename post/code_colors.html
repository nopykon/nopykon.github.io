<!-- _head.htm -->

<html>
  <head>	
	<meta charset="UTF-8">

	<meta name="description" content="Portfolio">
	<meta name="keywords" content="Graphics, Art, Programming">
	<meta name="author" content="Kristoffer Gustavsson, qristofer, nopy">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="stylesheet" type="text/css" href="../style.css">
	<link rel="icon" href="../icon/favi3.svg">  


	<title>Nopy's Stuff</title>


  </head>  
  <body >
	
	<div class="TMD">

	  <table width="100%" style="margin:0px; padding:0px;">
		<tr>
		  
		  <td width="100px">
		  </td>

		  <td>
			
			<a href="../post/3D.html"><div class="button"><img src="../../icon/blender-1.svg" width="16px" /> &nbsp;3D Art </div></a>
			<a href="../post/2D.html"><div class="button"><img src="../../icon/paintbrush.svg" width="16px" /> &nbsp;2D Art </div></a>
			<a href="../post/games.html"><div class="button"><img src="../../icon/joystick.svg" width="16px" /> &nbsp;Games </div></a>				
			<!--a href="../post/code.html"><div class="button"><img src="../../icon/hammer-solid.svg" width="16px" /> &nbsp;Programming</div></a -->	

			
			
			
			<div style="float:right;">
			  <a href="https://twitter.com/qristofer"><div class="button"><img src="../icon/twitter-brands.svg" width="16px">  </div></a>
			  <a href="mailto:nopy7@proton.me"><div class="button" style="margin-right:32px;"><img src="../icon/envelope-solid.svg" width="16px" />  </div></a>
			</div>
			<div style="clear:both;"></div>
		  </td>
		</tr>
	  </table>
	  
	  <a href="../index.html">
		<image id="TopSeal" src="../../icon/LongSeal.svg" style="position:absolute; left:32px; bottom:-25%; height:100%;">
	  </a>

	</div> <!-- TMD -->
	
<!-- _single.htm -->
<div style="max-width:1000px; 
			min-width:300px; 
			margin: 0 auto;
			color:#ddd;
			padding:8px;">

<h2>Stupidly Simple (And Slow) Color Reduction Algorithm</h2>

<p>For the last two years I've been using Median cut for most things, which works. But lately I found myself wanting to Bias the output for different images.</p>

<p>I decided to just start from scratch with an idea of an absolute brute force algorithm that suddenly entered my head.</p>

<ul>
  <li>Have a palette with "too many" colors, preferably in L*a*b color space.</li>

  <li>Find the pair of colors with the lowest score, ie. the two most similar* colors.</li>

  <li>Merge the two colors** </li>

  <li>Repeat from step 3 until only there are few enough colors.</li>
</ul>

<p>*Biased for the number of occurances (uses in the image), and in other ways as well.</p>

<p>**Either ick the one used the most, or calculate average. Another oppertunity for added biases.</p>

<p>One step I didn't mention in the above list is the conversion to L*a*b colorspace.</p>

<p>The downside to the simplicity is the speed. It's absolutely brute force. For every color you remove, you must iterate every color against every other color, which really adds up if the initial number of colors is large.</p>

With a 1000 color image reduced down to 16, it's really no issue. But once we get to 4000, it's starts to really slow down a lot.</p>

<p>I will try to fix this next time I sit down with it, to see if there's some simple data structure or hack that could drastically improve the speed. Or maybe I should go back to the Median Cut implementation and try to tweak that. (MC is incredibly fast by comparison).</p>

<p>After that I'll come back here to finish this post. Until then!</p>
<!-- _foot.htm -->

<br>
<br>
<br>

</div>

<div class="foot">
  <p>End of page.&emsp;
	<a href="#top">Top</a>&emsp;
	<a href="../">Home</a>
  </p>
</div>


</body>
</html>
